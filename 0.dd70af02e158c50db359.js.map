{"version":3,"sources":["webpack:///./src/app/containers/user/index.ts","webpack:///./src/app/containers/user/user.component.ts","webpack:///./src/app/containers/user/user.component.ts.UserComponent.html","webpack:///./src/app/containers/user/user-player.service.ts","webpack:///./src/app/containers/user/playlists/playlists.component.ts","webpack:///./src/app/containers/user/playlists/playlists.component.ts.PlaylistsComponent.html","webpack:///./src/app/containers/user/user.guard.ts"],"names":["UserModule","user_component_UserComponent","[object Object]","appApi","store","this","playlists$","select","user_profile_selectors","currentPlaylist$","isSignedIn$","signinUser","_l","core","_v","en","$event","ad","_co","component","icon_directive_ngfactory","icon_directive","name","_ck","app_navbar_component_ngfactory","app_navbar_component","authorization_service","app_api","header","headerIcon","View_UserComponent_1","common","ngIf","router","transform","user_player_service_UserPlayerService","nowPlaylistService","userProfile","playlist","fetchPlaylistItems","id","subscribe","items","dispatch","now_playlist","updateIndexByMedia","app_player","media","PlaylistsComponent","userPlayerService","state","user","playlists","playSelectedPlaylist","queuePlaylist","youtube_playlist_ngfactory","youtube_playlist","link","play","queue","context","$implicit","View_PlaylistsComponent_1","ngForOf","AuthGuard","authorization","route","url","checkLogin","canActivate","isSignIn","navigate"],"mappings":"0HAmCOA,6JCPMC,EAKXC,YAAoBC,EAAuBC,GAAvBC,KAAAF,SAAuBE,KAAAD,QAJ3CC,KAAAC,WAAaD,KAAKD,MAAMG,OAAOC,EAAA,GAC/BH,KAAAI,iBAAmBJ,KAAKD,MAAMG,OAAOC,EAAA,GACrCH,KAAAK,YAAcL,KAAKD,MAAMG,OAAOC,EAAA,GAIhCN,YAEAA,aACEG,KAAKF,OAAOQ,+TChCZC,MAAAC,EAAA,qFAAoDD,MAAAC,EAAA,sFAElDD,MAAAC,EAAA,0GAAAC,EAAAC,EAAAC,GAAA,IAAAC,GAAA,EAAAC,EAAAJ,EACyBK,UAAvB,UAAAJ,8BADF,OAAAE,GAAA,aAEEL,MAAAC,EAAA,uEAAAO,EAAA,EAAAA,EAAA,IAAAP,EAAA,6BAAAQ,EAAA,GAAAR,EAAA,WAAAA,EAAA,YAAAS,MAAA,kBAA2BV,MAAAC,EAAA,sCAC7B,SAAAU,EAAAT,GADES,EAAAT,EAAA,IAAM,WAAa,8CATzBF,MAAAC,EAAA,sEACED,MAAAC,EAAA,4DAAAW,EAAA,EAAAA,EAAA,IAAAX,EAAA,6BAAAY,EAAA,GAAAC,EAAA,EAAAC,EAAA,IAAAC,QAAA,YAAAC,YAAA,wBAIAjB,MAAAC,EAAA,uCAAAiB,IAAAjB,EAAA,4BAAAkB,EAAA,MAAAlB,EAAA,iBAAAA,EAAA,cAAAmB,MAAA,iBAAGnB,EAAA,oBAAAkB,EAAA,WAAAlB,EAAA,qBAOHD,MAAAC,EAAA,kFAAAA,EAAA,6BAAAoB,EAAA,GAAAA,EAAA,EAAApB,EAAA,iBAAAA,EAAA,kCAAAA,EAAA,+BAAe,SAAAU,EAAAT,GAAA,IAAAI,EAAAJ,EAAAK,UAXfI,EAAAT,EAAA,IACE,4BACA,WAEFS,EAAAT,EAAA,KAAGD,EAAA,aAAAC,EAAA,IAAAD,EAAA,aAAAC,EAAA,GAAAoB,UAAAhB,EAA8BR,eAOjCa,EAAAT,EAAA,MAAe,wTCLNqB,EACXjC,YACUkC,EACAC,EACAjC,GAFAC,KAAA+B,qBACA/B,KAAAgC,cACAhC,KAAAD,QAGVF,qBAAqBoC,GACnBjC,KAAKgC,YACFE,mBAAmBD,EAASE,GAAI,IAChCC,UAAWC,IACVrC,KAAKD,MAAMuC,SAAS,IAAIC,EAAA,EAAwBF,IAChDrC,KAAK+B,mBAAmBS,mBAAmBH,EAAM,GAAGF,IACpDnC,KAAKD,MAAMuC,SAAS,IAAIG,EAAA,EAAsBJ,EAAM,OAI1DxC,cAAcoC,GACZjC,KAAKgC,YACFE,mBAAmBD,EAASE,GAAI,IAChCC,UAAWC,IACVrC,KAAKD,MAAMuC,SAAS,IAAIC,EAAA,EAAwBF,IACzCA,IAIbxC,WAAW6C,GACT1C,KAAKD,MAAMuC,SAAS,IAAIC,EAAA,EAAuBG,IAGjD7C,UAAU6C,GACR1C,KAAKD,MAAMuC,SAAS,IAAIG,EAAA,EAAsBC,IAC9C1C,KAAKD,MAAMuC,SAAS,IAAIC,EAAA,EAAuBG,IAC/C1C,KAAKD,MAAMuC,SAAS,IAAIC,EAAA,EAAwBG,WCpB7CC,EAGL9C,YACUE,EACA6C,GADA5C,KAAAD,QACAC,KAAA4C,oBAJV5C,KAAAC,WAAaD,KAAKD,MAAMG,OAAO2C,GAASA,EAAMC,KAAKC,WAOnDlD,YAEAA,qBAAqBoC,GACnBjC,KAAK4C,kBAAkBI,qBAAqBf,GAG9CpC,sBAAsBoC,GACpBjC,KAAK4C,kBAAkBK,cAAchB,sGCjCnC1B,MAAAC,EAAA,iHAAAC,EAAAC,EAAAC,GAAA,IAAAC,GAAA,EAAAC,EAAAJ,EAK4CK,UAD1C,SAAAJ,2DACA,UAAAA,4DALF,OAAAE,GAAAsC,EAAA,EAAAA,EAAA,IAAA1C,EAAA,4BAAA2C,EAAA,MAAAT,OAAA,WAAAU,MAAA,YAAAC,KAAA,OAAAC,MAAA,WAK4C,SAAApC,EAAAT,GAL5CS,EAAAT,EAAA,IAEEA,EAAkB8C,QAAAC,UAClB,WAAa,8CALnBjD,MAAAC,EAAA,6FACED,MAAAC,EAAA,qIACED,MAAAC,EAAA,uCAAAiD,IAAAjD,EAAA,6BAAAkB,EAAA,SAAAlB,EAAA,iBAAAA,EAAA,YAAAA,EAAA,kBAAAkD,SAAA,oBACElD,EAAA,oBAAAkB,EAAA,WAAAlB,EAAA,8BAAAU,EAAAT,GAAA,IAAAI,EAAAJ,EAAAK,UADFI,EAAAT,EAAA,IACED,EAAA,aAAAC,EAAA,IAAAD,EAAA,aAAAC,EAAA,GAAAoB,UAAAhB,EAA2CZ,eAAA,oUCE5C0D,EACL9D,YAAoB+D,EAAsChC,GAAtC5B,KAAA4D,gBAAsC5D,KAAA4B,SAE1D/B,YAAYgE,EAA+BhB,GAEzC,MAAMiB,EAAcjB,EAAMiB,IAC1B,OAAO9D,KAAK+D,WAAWD,GAGzBjE,iBAAiBgE,EAA+BhB,GAC9C,OAAO7C,KAAKgE,YAAYH,EAAOhB,GAGjChD,WAAWiE,GACT,QAAI9D,KAAK4D,cAAcK,aAMvBjE,KAAK4B,OAAOsC,UAAU,WACf","file":"0.dd70af02e158c50db359.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { SharedModule } from '@shared/index';\nimport { AppNavbarModule } from '../app-navbar';\n\nimport { PlaylistViewModule } from '../playlist-view'\n\nimport { UserComponent } from './user.component';\nimport { PlaylistsComponent } from './playlists';\n// import { PlaylistViewComponent, PlaylistResolver, PlaylistVideosResolver } from '@shared/components/playlist-view';\n\nimport { AuthGuard } from './user.guard';\nimport { UserPlayerService } from './user-player.service';\nimport { routing } from './user.routing';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    AppNavbarModule,\n    PlaylistViewModule,\n    routing\n  ],\n  declarations: [\n    UserComponent,\n    PlaylistsComponent\n  ],\n  exports: [\n    UserComponent\n  ],\n  providers: [\n    AuthGuard,\n    UserPlayerService,\n    // PlaylistResolver,\n    // PlaylistVideosResolver\n  ]\n})\nexport class UserModule { }\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { EchoesState } from '@core/store';\n\nimport * as UserProfile from '@core/store/user-profile/user-profile.selectors';\nimport { AppApi } from '@api/app.api';\n\n@Component({\n  selector: 'app-user',\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['./user.scss'],\n  template: `\n  <article>\n    <app-navbar\n      [header]=\"'My Profile - My Playlists'\"\n      [headerIcon]=\"'heart-o'\"\n    ></app-navbar>\n    <p *ngIf=\"!(isSignedIn$ | async)\" class=\"well lead\">\n      To view your playlists in youtube, you need to sign in.\n      <button class=\"btn btn-lg btn-primary\"\n        (click)=\"signInUser()\">\n        <icon name=\"google\"></icon> Sign In\n      </button>\n    </p>\n    <router-outlet></router-outlet>\n  </article>\n  `\n})\nexport class UserComponent implements OnInit {\n  playlists$ = this.store.select(UserProfile.getUserPlaylists);\n  currentPlaylist$ = this.store.select(UserProfile.getUserViewPlaylist);\n  isSignedIn$ = this.store.select(UserProfile.getIsUserSignedIn);\n\n  constructor(private appApi: AppApi, public store: Store<EchoesState>) {}\n\n  ngOnInit() {}\n\n  signInUser() {\n    this.appApi.signinUser();\n  }\n}\n","\n  <article>\n    <app-navbar\n      [header]=\"'My Profile - My Playlists'\"\n      [headerIcon]=\"'heart-o'\"\n    ></app-navbar>\n    <p *ngIf=\"!(isSignedIn$ | async)\" class=\"well lead\">\n      To view your playlists in youtube, you need to sign in.\n      <button class=\"btn btn-lg btn-primary\"\n        (click)=\"signInUser()\">\n        <icon name=\"google\"></icon> Sign In\n      </button>\n    </p>\n    <router-outlet></router-outlet>\n  </article>\n  ","import { Store } from '@ngrx/store';\nimport { Injectable } from '@angular/core';\nimport { YoutubePlayerService, NowPlaylistService, UserProfile } from '@core/services';\nimport { EchoesState } from '@core/store';\nimport * as NowPlaylist from '@core/store/now-playlist';\nimport * as AppPlayer from '@core/store/app-player';\n\n@Injectable()\nexport class UserPlayerService {\n  constructor(\n    private nowPlaylistService: NowPlaylistService,\n    private userProfile: UserProfile,\n    private store: Store<EchoesState>\n  ) { }\n\n  playSelectedPlaylist(playlist: GoogleApiYouTubePlaylistResource) {\n    this.userProfile\n      .fetchPlaylistItems(playlist.id, '')\n      .subscribe((items: GoogleApiYouTubeVideoResource[]) => {\n        this.store.dispatch(new NowPlaylist.QueueVideos(items));\n        this.nowPlaylistService.updateIndexByMedia(items[0].id);\n        this.store.dispatch(new AppPlayer.LoadAndPlay(items[0]));\n      });\n  }\n\n  queuePlaylist(playlist: GoogleApiYouTubePlaylistResource) {\n    this.userProfile\n      .fetchPlaylistItems(playlist.id, '')\n      .subscribe((items: GoogleApiYouTubeVideoResource[]) => {\n        this.store.dispatch(new NowPlaylist.QueueVideos(items));\n        return items;\n      });\n  }\n\n  queueVideo(media: GoogleApiYouTubeVideoResource) {\n    this.store.dispatch(new NowPlaylist.QueueVideo(media));\n  }\n\n  playVideo(media: GoogleApiYouTubeVideoResource) {\n    this.store.dispatch(new AppPlayer.LoadAndPlay(media));\n    this.store.dispatch(new NowPlaylist.QueueVideo(media));\n    this.store.dispatch(new NowPlaylist.SelectVideo(media));\n  }\n}\n","import { UserPlayerService } from '../user-player.service';\nimport { EchoesState } from '@core/store';\nimport { Component, OnInit } from '@angular/core';\nimport { Store } from '@ngrx/store';\n\n@Component({\n  selector: 'playlists',\n  template: `\n  <section class=\"videos-list\">\n    <div class=\"list-unstyled ux-maker youtube-items-container clearfix\">\n      <youtube-playlist\n        *ngFor=\"let playlist of playlists$ | async\"\n        [media]=\"playlist\"\n        link=\"/user/\"\n        (play)=\"playSelectedPlaylist(playlist)\"\n        (queue)=\"queueSelectedPlaylist(playlist)\">\n      </youtube-playlist>\n    </div>\n  </section>\n  `\n})\nexport class PlaylistsComponent implements OnInit {\n  playlists$ = this.store.select(state => state.user.playlists);\n\n  constructor(\n    private store: Store<EchoesState>,\n    private userPlayerService: UserPlayerService\n  ) { }\n\n  ngOnInit() { }\n\n  playSelectedPlaylist(playlist: GoogleApiYouTubePlaylistResource) {\n    this.userPlayerService.playSelectedPlaylist(playlist);\n  }\n\n  queueSelectedPlaylist(playlist: GoogleApiYouTubePlaylistResource) {\n    this.userPlayerService.queuePlaylist(playlist);\n  }\n}\n","\n  <section class=\"videos-list\">\n    <div class=\"list-unstyled ux-maker youtube-items-container clearfix\">\n      <youtube-playlist\n        *ngFor=\"let playlist of playlists$ | async\"\n        [media]=\"playlist\"\n        link=\"/user/\"\n        (play)=\"playSelectedPlaylist(playlist)\"\n        (queue)=\"queueSelectedPlaylist(playlist)\">\n      </youtube-playlist>\n    </div>\n  </section>\n  ","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, CanActivateChild, Router, RouterStateSnapshot } from '@angular/router';\n\nimport { Authorization } from '@core/services';\n\n@Injectable()\nexport class AuthGuard implements CanActivate, CanActivateChild {\n  constructor(private authorization: Authorization, private router: Router) { }\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    // console.log('AuthGuard#canActivate called', { state });\n    const url: string = state.url;\n    return this.checkLogin(url);\n  }\n\n  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    return this.canActivate(route, state);\n  }\n\n  checkLogin(url: string): boolean {\n    if (this.authorization.isSignIn()) { return true; }\n\n    // Store the attempted URL for redirecting\n    // this.authService.redirectUrl = url;\n\n    // Navigate to the login page with extras\n    this.router.navigate(['/user']);\n    return false;\n  }\n}\n"],"sourceRoot":""}